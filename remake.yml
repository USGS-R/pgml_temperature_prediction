#first render the remake file, then run it
#need to functionalize render

packages:
  - scipiper
  - whisker
  - assertthat
  - dplyr
  
sources:
  - remake_templates/render_s3.R
  
targets:
  all:
    depends:
    - 1_data_download/data_download.ind
    - 1_data_s3.yml
    - 1_data_s3/data_s3.ind
    - 1_data_s3_cleaned.yml
    - 1_data_s3_cleaned/data_s3_cleaned.ind
    
  1_data_download/data_download.ind:
    command: scmake(remake_file = "1_data_download.yml")
  
  1_data_s3.yml:
    command: render_s3()
    depends: 
    - lib/crosswalks/rawfile_to_id_crosswalk.csv
    - remake_templates/s3.template
  1_data_s3/data_s3.ind:
    command: scmake(remake_file = "1_data_s3.yml")
    
  1_data_s3_cleaned.yml:
    command: render_s3_clean()
    depends:
    - lib/crosswalks/rawfile_to_id_crosswalk.csv
    - remake_templates/s3_clean.template
  1_data_s3_cleaned/data_s3_cleaned.ind:
    command: scmake(remake_file = "1_data_s3_cleaned.yml")
    
